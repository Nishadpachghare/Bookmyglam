<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sbsm-admin-panel</title>
  </head>
  <body>
    <div id="root"></div>
    <script>
      (function(){
        var blockedHost = 'api-js.mixpanel.com';
        // No-op mixpanel object to avoid uncaught errors
        window.mixpanel = window.mixpanel || { track: function(){}, init: function(){}, identify: function(){}, people: { set: function(){} } };

        // Intercept fetch requests to blocked host and resolve gracefully
        var origFetch = window.fetch;
        if(origFetch){
          window.fetch = function(input, init){
            try{
              var url = (typeof input === 'string') ? input : (input && input.url);
              if(url && url.indexOf(blockedHost) !== -1){
                return Promise.resolve(new Response(null, { status: 204 }));
              }
            }catch(e){ /* ignore */ }
            return origFetch.apply(this, arguments);
          };
        }

        // Intercept XHR send to blocked host
        try{
          var OrigXHR = window.XMLHttpRequest;
          function XHRProxy(){
            var xhr = new OrigXHR();
            var origOpen = xhr.open;
            xhr.open = function(method, url){ this._url = url; return origOpen.apply(this, arguments); };
            var origSend = xhr.send;
            xhr.send = function(){
              try{
                if(this._url && this._url.indexOf(blockedHost) !== -1){
                  this.readyState = 4;
                  this.status = 204;
                  if(typeof this.onreadystatechange === 'function') this.onreadystatechange();
                  if(typeof this.onload === 'function') this.onload();
                  return;
                }
              }catch(e){}
              return origSend.apply(this, arguments);
            };
            return xhr;
          }
          window.XMLHttpRequest = XHRProxy;
        }catch(e){ /* ignore */ }

        console.info('[Analytics] Intercepting Mixpanel calls to reduce blocked-by-client console noise.');
      })();
    </script>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
